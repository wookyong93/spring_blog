<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   <mapper namespace="mapper.board">
   <resultMap type="boardVO" id="boardResult">
   		<result property="id" column="id"/>
   		<result property="title" column="title"/>
   		<result property="content" column="content"/>
   		<result property="writeDate" column="writeDate"/>
   		<result property="contentNO" column="contentNO"/>
   </resultMap>
   
   
   <!-- 로그인 아이디 최근 글 가져오기 -->
   <select id="latelycontent" parameterType="String" resultType="boardVO">
   	<![CDATA[
   		SELECT * FROM (
			SELECT * FROM blog_content WHERE id=#{id} ORDER BY contentNO DESC)
		WHERE rownum = 1
   	]]>
   	</select>
   	
   	<!-- 로그인 ID 글목록 가져오기 -->
   	<select id="boardList" parameterType="String" resultType="boardVO">
   		<![CDATA[
   			SELECT * FROM blog_content WHERE id=#{id} ORDER BY contentNO DESC
   		]]>
   </select>
   
   <!-- 개시글 페이징 기능 구현하기 -->
  <select id="pageList" parameterType="criteria" resultType="boardVO">
   	<![CDATA[
   		SELECT * FROM (
		    SELECT blog.* ,ROWNUM as rNum FROM(
		        SELECT * FROM blog_content WHERE id=#{id} 
		        ORDER BY contentNO DESC , writeDate DESC
		    )blog
		) WHERE rNum BETWEEN #{rowStart} AND #{rowEnd}
   	]]>
   </select>
   <select id="pageCount" parameterType="String" resultType="Integer">
   	<![CDATA[
   		SELECT COUNT(*) FROM blog_content WHERE id=#{id}
   	]]>
   </select>
   
   <insert id="insertContent" parameterType="boardVO">
   		<![CDATA[
   			INSERT INTO blog_content(contentNO,title,content,id) VALUES(blog_seq.nextval,#{title},#{content},#{id})
   		]]>
   </insert>
   </mapper>